<html xmlns:stu="stu">
<metal:macro metal:use-macro="html/sitemacros.xhtml/sitedefaults">
	<metal:macro metal:fill-slot="body">
		<metal:macro metal:use-macro="html/colonymacros.xhtml/initial_js" />
		<metal:macro metal:use-macro="html/sitemacros.xhtml/breadcrumb" />
		<form action="colony.php" method="post" name="colmanform">
			<stu:hidden name="id" tal:attributes="value COLONY/getId" />	
			<stu:hidden name="rump" tal:attributes="value RUMP/getId" />
			<stu:hidden name="SHOW_MODULE_SCREEN" value="1" />
			<stu:hidden name="module_level" tal:attributes="value RUMP/getModuleLevel" />
			<table style="width: 100%">
				<tr>
					<td style="width: 70%">
						<table class="tcal">
							<tr>
								<th i18n:translate="">Rumpf</th>
								<th i18n:translate="">Klasse</th>
								<th i18n:translate="">Typ</th>
								<th i18n:translate="">Rolle</th>
								<th i18n:translate="">Lagerraum</th>
							</tr>
							<tr>
								<td rowspan="3" style="text-align: center; vertical-align: middle">
									<img src="assets/ships/${RUMP/getId}.gif" />
								</td>
								<td tal:content="RUMP/getName"></td>
								<td tal:content="RUMP/getShipRumpCategory/getName">.</td>
								<td tal:content="RUMP/getShipRumpRole/getName">.</td>
								<td tal:content="RUMP/getStorage">STORAGE</td>
							</tr>
							<tr>
								<th i18n:translate="">Sensorreichweite</th>
								<th i18n:translate="">Torpedotyp</th>
								<th i18n:translate="">Torpedosalven</th>
								<th i18n:translate="">Torpedokapazität</th>
							</tr>
							<tr>
								<td tal:content="RUMP/getBaseSensorRange">SENSORRANGE</td>
								<td tal:content="RUMP/getTorpedoLevel">.</td>
								<td tal:content="RUMP/getTorpedoVolleys">.</td>
								<td tal:content="RUMP/getBaseTorpedoStorage">TORPEDOSTORAGE</td>
							</tr>
						</table>
					</td>
					<td style="width: 30%; text-align: right">
						<div style="width: 300px; display: inline-block">
							<div class="divhead" style="text-align: center" i18n:translate="">Baufauftrag</div>
							<div class="divbody">
								<div style="width: 100%; text-align: center">
									<div id="crewdisplay">
										<div id="crew100p" i18n:translate="">Benötigte Crew: <span i18n:name="crewcount" tal:replace="RUMP/getCrew100P" />(100%)</div>
										<div id="crew110p" i18n:translate="" style="display: none;">Benötigte Crew: <span i18n:name="crewcount" tal:replace="RUMP/getCrew110P" />(110%)</div>
										<div id="crew120p" i18n:translate="" style="display: none;">Benötigte Crew: <span i18n:name="crewcount" tal:replace="RUMP/getCrew120P" />(120%)</div>
										<div id="crewerr" style="display: none;" i18n:translate="">Crewbedarf &gt; 120% - Nicht baubar</div>
									</div>
								</div>
								<br />
								<div style="text-align: center; width: 100%;">
									<input type="submit" class="button" name="B_BUILD_SHIP" value="Schiff bauen" i18n:attributes="value" id="buildbutton" disabled="disabled" />
								</div>
								<br />
							</div>
						</div>
					
					</td>
				</tr>
			</table>
			<br />
			<table class="tcal" id="module_select_tabs">
				<tr>
					<td colspan="5" id="module_select_base" class="module_select_base module_select_base_selected" onclick="showModuleSelectTab(this,0);">
						<img src="assets/buttons/info1.gif" />
						<span i18n:translate="">Zusammenfassung</span>
					</td>
				</tr>
				<tr>
					<metal:macro metal:use-macro="html/colonymacros.xhtml/module_select_tab" tal:define="moduleType string:1" />
					<metal:macro metal:use-macro="html/colonymacros.xhtml/module_select_tab" tal:define="moduleType string:2" />
					<metal:macro metal:use-macro="html/colonymacros.xhtml/module_select_tab" tal:define="moduleType string:6" />
					<metal:macro metal:use-macro="html/colonymacros.xhtml/module_select_tab" tal:define="moduleType string:4" />
					<td></td>
				</tr>
				<tr>
					<metal:macro metal:use-macro="html/colonymacros.xhtml/module_select_tab" tal:define="moduleType string:5" />
					<metal:macro metal:use-macro="html/colonymacros.xhtml/module_select_tab" tal:define="moduleType string:3" />
					<metal:macro metal:use-macro="html/colonymacros.xhtml/module_select_tab" tal:define="moduleType string:7" />
					<metal:macro metal:use-macro="html/colonymacros.xhtml/module_select_tab" tal:define="moduleType string:8" />
					<metal:macro metal:use-macro="html/colonymacros.xhtml/module_select_tab" tal:define="moduleType string:9" />
				</tr>
			</table>
			<br />
			<div id="module_select_tab_0">
				<table class="tcal">
					<tr>
						<th i18n:translate="">Zusammenfassung</th>
					</tr>
					<tr>
						<td tal:define="rump RUMP">
							<tal:block tal:repeat="slot MODULE_SLOTS">
								<tal:block tal:condition="not:PLAN">
									<div id="module_type_${slot}">
									</div>
								</tal:block>
								<tal:block tal:condition="PLAN" >
									<div id="module_type_${slot}" tal:condition="not:PLAN/getModule/${slot}" style="display: none;">
									</div>
									<div id="module_type_${slot}" tal:condition="PLAN/getModule/${slot}" tal:define="module PLAN/getModule/${slot}">
										<metal:macro metal:use-macro="moduleselector_stats_type_${slot}"/>
										<script type="text/Javascript" tal:condition="module">
											crew_type.set(${slot},${module/getModule/getLevel});
										</script>
									</div>
								</tal:block>
							</tal:block>
						</td>
					</tr>
				</table>
			</div>
			<tal:block tal:repeat="selector MODULE_SELECTORS">
				<div id="module_select_tab_${selector/getModuleType}" style="display: none;" tal:content="structure selector/render">CONTENT</div>
			</tal:block>
			<script type="text/javascript" defer="defer" tal:condition="PLAN">
				enableShipBuildButton();
			</script>
		</form>
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector">
		<table class="tcal">
			<tr>
				<th tal:content="THIS/getModuleDescription">MODULE</th>
			</tr>
		</table>
		<table class="tcal" tal:define="rump THIS/getRump" tal:condition="not:THIS/allowMultiple">
			<stu:hidden name="module_level_${THIS/getModuleType}" tal:attributes="value THIS/getRump/getModuleLevels/getModuleLevel${THIS/getModuleType}" />
			<tal:block tal:condition="THIS/getAvailableModules">
				<tr tal:condition="THIS/allowEmptySlot">
					<td class="module_positive" style="width: 3px;"></td>
					<td colspan="4">
						<input type="radio" tal:attributes="checked not:THIS/hasModuleSelected/${THIS/getModuleType}" name="mod_${THIS/getModuleType}[]" value="0" onchange="replaceTabImage(${THIS/getModuleType},0)" />
						<span i18n:translate="">Keine Auswahl</span>
						<script defer="defer">
							crew_type.set(${THIS/getModuleType},0);
						</script>
					</td>
				</tr>
				<tr tal:repeat="module THIS/getAvailableModules" class="runtime" tal:attributes="class string:row${repeat/module/odd}">
					<td style="width: 3px;" tal:attributes="class php:getModuleLevelClass(rump,module)"></td>
					<td style="width: 50px;">
						<input type="radio" tal:attributes="checked module/isChosen;disabled not:THIS/getColony/hasStorage/${module/getModule/getGoodId}/1" name="mod_${THIS/getModuleType}[]" value="${module/getModule/getId}" onchange="replaceTabImage(${THIS/getModuleType},${module/getModule/getId},${module/getModule/getGoodId},${module/getModule/getLevel})" />
						<img src="assets/goods/${module/getModule/getGoodId}.gif" />
					</td>
					<td style="width: 300px;" tal:content="module/getModule/getName">NAME</td>
					<td style="width: 30px; text-align: center;" tal:content="module/getModule/getLevel">LEVEL</td>
					<td id="${module/getModule/getId}_content">
						<metal:macro metal:use-macro="moduleselector_stats_type_${THIS/getModuleType}" />
					</td>
				</tr>
			</tal:block>
			<tr tal:condition="not:THIS/getAvailableModules">
				<td>Keine Module dieses Typs vorhanden</td>
			</tr>
		</table>
		<table class="tcal" tal:define="rump THIS/getRump" tal:condition="THIS/allowMultiple">
			<tal:block tal:condition="THIS/getAvailableModules" tal:repeat="module THIS/getAvailableModules">
				<tr class="runtime" tal:attributes="class string:row${repeat/module/odd}">
					<td style="width: 50px;">
						<input type="checkbox" tal:attributes="checked module/isChosen;disabled not:THIS/getColony/hasStorage/${module/getModule/getGoodId}/1" name="mod_${THIS/getModuleType}[]" value ="${module/getModule/getId}" onchange="toggleSpecialModuleDisplay(${THIS/getModuleType},${module/getModule/getId},${module/getModule/getGoodId},${module/getModule/getLevel})" />
						<img src="assets/goods/${module/getModule/getGoodId}.gif" />
					</td>
					<td style="width: 300px;" tal:content="module/getModule/getName">NAME</td>
					<td style="width: 30px; text-align: center;" tal:content="module/getModule/getLevel">LEVEL</td>
					<td id="${module/getModule/getId}_content">
						<metal:macro metal:use-macro="moduleselector_stats_type_${THIS/getModuleType}" />
					</td>
				</tr>
			</tal:block>
			<tr tal:condition="not:THIS/getAvailableModules">
				<td>Keine Module dieses Typs vorhanden</td>
			</tr>
		</table>
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector_stats_type_1">
		<img src="assets/buttons/modul_1.gif" tal:attributes="title module/getModule/getDescription"/> <span i18n:translate="">Hüllenstärke</span>: <span tal:replace="php:calculateModuleValue(rump,module.getModule(),'getBaseHull')">VALUE</span>
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector_stats_type_2">
		<img src="assets/buttons/modul_2.gif" tal:attributes="title module/getModule/getDescription"/> <span i18n:translate="">Schildkapazität</span>: <span tal:replace="php:calculateModuleValue(rump,module.getModule(),'getBaseShield')">VALUE</span>
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector_stats_type_3">
		<img src="assets/buttons/modul_3.gif" tal:attributes="title module/getModule/getDescription"/> <span i18n:translate="">Energiespeicher</span>: <span tal:replace="php:calculateModuleValue(rump,module.getModule(),'getBaseEps')">VALUE</span>
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector_stats_type_4">
		<img src="assets/buttons/modul_4.gif" tal:attributes="title module/getModule/getDescription" /> <span i18n:translate="">Ausweichchance</span>: <span tal:replace="php:calculateEvadeChance(rump,module.getModule())">VALUE</span>%
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector_stats_type_5">
		<img src="assets/buttons/modul_5.gif" tal:attributes="title module/getModule/getDescription"/> <span i18n:translate="">Reaktorleistung</span>: <span tal:replace="php:calculateModuleValue(rump,module.getModule(),'getBaseReactor')">VALUE</span>
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector_stats_type_6">
		<img src="assets/buttons/modul_6.gif" tal:attributes="title module/getModule/getDescription" /> <span i18n:translate="">Trefferchance</span>: <span tal:replace="php:calculateModuleValue(rump,module.getModule(),'getHitChance')">VALUE</span>%
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector_stats_type_7">
		<img src="assets/buttons/modul_7.gif" tal:attributes="title module/getModule/getDescription"/> <span i18n:translate="">Basisschaden (abstrakt)</span>: <span tal:replace="php:calculateModuleValue(rump,module.getModule(),'getBaseDamage')">VALUE</span>
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector_stats_type_8">
		<img src="assets/buttons/modul_8.gif" tal:attributes="title module/getModule/getDescription"/> <span i18n:translate="">Torpedoschaden</span>: <span tal:replace="php:calculateDamageImpact(rump,module.getModule())">VALUE</span>
	</metal:macro>
	<metal:macro metal:define-macro="moduleselector_stats_type_9">
		<div tal:repeat="special module/getModule/getSpecials" class="module_special_${module/getModule/getId}" id="module_special_${module/getModule/getId}">
			<img src="assets/buttons/modul_special_${special/getId}.gif" tal:attributes="title special/getName" /> <span tal:content="special/getName"></span>
		</div>
	</metal:macro>
</metal:macro>
</html>
