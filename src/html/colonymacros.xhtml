<html xmlns:stu="stu">
	<metal:macro metal:define-macro="colonyimage">
		<tal:block tal:condition="colony/ownedByCurrentUser">
			<a href="colony.php?SHOW_COLONY=1&id=${colony/getId}"><metal:macro metal:use-macro="colonyimage_base" /></a>	
		</tal:block>
		<tal:block tal:condition="not:colony/ownedByCurrentUser">
			<metal:macro metal:use-macro="colonyimage_base" />
		</tal:block>
	</metal:macro>
	<metal:macro metal:define-macro="colonyimage_base">
		<div tal:condition="colony/getPlanetType/hasRing" class="planet_ring" style="background-image: url(${GFX}/planets/${colony/getColonyClass}.gif)">
			<img src="${GFX}/planets/${colony/getColonyClass}r.png"/>
		</div>
		<img src="${GFX}/planets/${colony/getColonyClass}.gif" tal:condition="not:colony/getPlanetType/hasRing"/>
	</metal:macro>
	<metal:macro metal:define-macro="hiddencolonyid" phptal:cache="1m per THIS/getColony/getId">
		<input type="hidden" name="id" tal:attributes="value THIS/getColony/getId" />
	</metal:macro>
	<metal:block metal:define-macro="initial_js">
		<script language="Javascript">
			var sstr = '${THIS/getSessionString}';
			var colonyid = ${THIS/getColony/getId};
			var scrollOffset = ${THIS/getBuildMenuScrollOffsetStandard};
		</script> 
		<script type="text/javascript" src="${THIS/getJavascriptPath}/html/js/colony.js"><!-- stuniverse --></script>
	</metal:block>
	<metal:block metal:define-macro="buildmenu">
		<input type="hidden" name="buildmenu${menutype}_offset" id="buildmenu${menutype}_offset" tal:attributes="value scrolloffset" />
		<div tal:content="THIS/getBuildMenu/${menutype}/getName">MENUNAME</div>
		<div class="arrow" onclick="buildMenuScrollUp(${menutype},${scrolloffset})" title="Hochblättern">
			<table style="width:100%; height: 100%;">
				<tr>
					<td style="text-align: center;">
						<img src="${GFX}/buttons/pup.gif" />
					</td>
				</tr>
			</table>
		</div>
		<ul class="menu" style="width: 190px;">
			<li tal:repeat="building menu/buildings">
			<div phptal:cache="1d per building/getTalCacheValue" onclick="openBuildingInfo(${building/getId})">
				<img src="${GFX}/buildings/${building/getId}/${building/getBuildingType}at.png" /><br />
				<span tal:replace="building/getName">runtime</span>
			</div>
			</li>
		</ul>
		<div class="arrow" onclick="buildMenuScrollDown(${menutype},${scrolloffset})" title="Runterblättern">
			<table style="width:100%; height: 100%;">
				<tr>
					<td style="text-align: center;">
						<img src="${GFX}/buttons/pdown.gif" />
					</td>
				</tr>
			</table>
		</div>
    </metal:block>
    <metal:block metal:define-macro="cm_buildmenu">
        <input type="hidden" name="colmenu" value="cm_buildmenu" />
        <metal:macro metal:use-macro="cm_tabs" />
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <table cellpading="0" cellspacing="0" style="text-align: center;">
                    <tr>
                        <td tal:repeat="menu THIS/getBuildingMenus" class="buildmenu buildmenu${repeat/menu/key}">
                            <div id="buildmenu${repeat/menu/key}">
                                <metal:macro metal:use-macro="html/colonymacros.xhtml/buildmenu" tal:define="menutype repeat/menu/key;scrolloffset string:0" />
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </metal:macro>
	</metal:block>
    <metal:block metal:define-macro="cm_social">
        <input type="hidden" name="colmenu" value="cm_social" />
        <metal:macro metal:use-macro="cm_tabs" />
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <table class="tcal">
                    <tr>
                        <th colspan="4" i18n:translate="">Crewberechnung dieser Kolonie</th>
                    </tr>
                    <tr>
                        <td style="width: 25%" class="darkbg"><span tal:replace="THIS/getColony/getPositiveEffectPrimaryDescription">PRIMARY</span></td>
                        <td style="width: 25%" class="darkbg"><span tal:replace="THIS/getColony/getPositiveEffectSecondaryDescription">PRIMARY</span></td>
                        <td style="width: 25%" class="darkbg"><span tal:replace="THIS/getColony/getNegativeEffectDescription">PRIMARY</span></td>
                        <td style="width: 25%" class="darkbg" i18n="translate">Erzeugte Crew</td>
                    </tr>
                    <tr>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" />
                            <span tal:replace="THIS/getColony/getPositiveEffectPrimary">VALUE</span>
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" />
                            <span tal:replace="THIS/getColony/getPositiveEffectSecondary">VALUE</span>
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" />
                            <span tal:replace="THIS/getColony/getNegativeEffect">VALUE</span>
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" />
                            <span tal:replace="THIS/getColony/getCrewLimit">VALUE</span>
                        </td>
                    </tr>
                </table>
                <br />
                <table class="tcal">
                    <tr>
                        <th i18n:translate="" colspan="5">Globale Crewübersicht</th>
                    </tr>
                    <tr>
                        <td style="width: 20%" class="darkbg">Crewlimit</td>
                        <td style="width: 20%" class="darkbg">Crew auf Schiffen</td>
                        <td style="width: 20%" class="darkbg">Verfügbare Crew</td>
                        <td style="width: 20%" class="darkbg">Crew in Ausbildung</td>
                        <td style="width: 20%" class="darkbg">Noch Ausbildbar</td>
                    </tr>
                    <tr>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" />
                            <span tal:replace="USER/getGlobalCrewLimit">LIMIT</span>
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" />
                            <span tal:replace="USER/getUsedCrewCount">USED</span>
                            (<span tal:content="USER/getCrewCountDebris" title="In Rettungskapseln" i18n:attributes="title">DEBRIS</span>)
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" />
                            <span tal:replace="USER/getFreeCrewCount">FREE</span>
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" />
                            <span tal:replace="USER/getInTrainingCrewCount">FREE</span>
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" />
                            <span tal:replace="USER/getCrewLeftCount">SLOTS</span>
                        </td>
                    </tr>
                </table>
            </div>
        </metal:macro>
	</metal:block>
    <metal:macro metal:define-macro="cm_academy">
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <stu:hidden name="id" tal:attributes="value THIS/getColony/getId" />
                <table class="tcal">
                    <tr>
                        <td style="width: 50%;" class="colonymenu">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
                                &lt;&lt; Zurück zum Koloniemenü
                            </a>
                        </td>
                        <td style="width: 50%;" tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/12}">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(12);">
                                <span i18n:translate="">Akademie</span>
                            </a>
                        </td>
                    </tr>
                </table>
                <br />
                <table class="tcal">
                    <tr>
                        <th i18n:translate="" colspan="4">Crewausbildung</th>
                    </tr>
                    <tr>
                        <td style="width: 25%" class="darkbg" i18n:translate="">Freie Bevölkerung</td>
                        <td style="width: 25%" class="darkbg" i18n:translate="">Gleichzeitig Ausbildbar</td>
                        <td style="width: 25%" class="darkbg" i18n:translate="">In Ausbildung</td>
                        <td style="width: 25%" class="darkbg" i18n:translate="">Noch Ausbildbar</td>
                    </tr>
                    <tr>
                        <td>
                            <img src="${GFX}/bev/bev_unused_5_${THIS/getUser/getFaction}.gif" title="Freie Bevölkerung" />
                            <span tal:replace="THIS/getColony/getWorkless" />
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Freie Bevölkerung" />
                            <span tal:replace="USER/getTrainableCrewCountMax" />
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Freie Bevölkerung" />
                            <span tal:replace="USER/getInTrainingCrewCount" />
                        </td>
                        <td>
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Freie Bevölkerung" />
                            <span tal:replace="USER/getCrewLeftCount" />
                        </td>
                    </tr>
                </table>
                <br />
                <table class="tcal">
                    <tr>
                        <th i18n:translate="">Ausbildung</th>
                    </tr>
                    <tr>
                        <td>
                            <input type="text" name="crewcount" size="2" /> / <span tal:replace="THIS/getTrainableCrewCountPerTick" />
                            <span i18n:translate="">Crew</span>
                            <stu:submit name="B_TRAIN_CREW" value="Ausbilden" i18n:attributes="value" />
                        </td>
                    </tr>
                </table>
            </div>
        </metal:macro>
    </metal:macro>
    <metal:macro metal:define-macro="cm_fighter_shipyard">
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <stu:hidden name="id" tal:attributes="value THIS/getColony/getId" />
                <table class="tcal">
                    <tr>
                        <td style="width: 50%;" class="colonymenu">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
                                &lt;&lt; Zurück zum Koloniemenü
                            </a>
                        </td>
                        <td style="width: 50%;" tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/10}">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(10);">
                                <span i18n:translate="">Hangar</span>
                            </a>
                        </td>
                    </tr>
                </table>
                <br />
                <table class="tcal">
                    <tr>
                        <th i18n:translate="" colspan="3">Jäger bauen</th>
                    </tr>
                    <tr tal:repeat="data THIS/getAvailableFighterShipyardRumps" tal:attributes="class string:row${repeat/data/odd}">
                        <td>
                            <input type="radio" name="buildrump" value="" tal:attributes="value data/getId" />
                            <img src="${GFX}/ships/${data/getId}.gif" />
                        </td>
                        <td tal:content="data/getName" style="vertical-align: middle;">NAME</td>
                        <td>
                            <div style="display: inline-block; width: 50px;">
                                <div style="display: inline-block; vertical-align: middle;"><img src="${GFX}/buttons/e_trans2.gif" title="Energie" i18n:attributes="title" /></div>
                                ${data/getEpsCost}
                            </div>
                            <div style="display: inline-block; width: 50px;" tal:repeat="cost data/getBuildingCosts">
                                <div style="display: inline-block; vertical-align: middle;"><img src="${GFX}/goods/${cost/getGoodId}.gif" tal:attributes="title cost/getGood/getName" /></div>
                                ${cost/getAmount}
                            </div>
                        </td>
                    </tr>
                    <tr tal:condition="not:THIS/getAvailableAirfieldRumps">
                        <td colspan="3" i18n:translate="" style="text-align: center;">Keine baubaren Rümpfe vorhanden</td>
                    </tr>
                </table>
                <div tal:condition="THIS/getAvailableFighterShipyardRumps" style="width: 100%; text-align: center">
                    <br />
                    <stu:submit name="B_BUILD_FIGHTER_SHIPYARD_RUMP" value="Schiff bauen" i18n:attributes="value" />
                </div>
            </div>
        </metal:macro>
    </metal:macro>
    <metal:macro metal:define-macro="cm_torpedo_fab">
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <stu:hidden name="id" tal:attributes="value THIS/getColony/getId" />
                <table class="tcal">
                    <tr>
                        <td style="width: 50%;" class="colonymenu">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
                                &lt;&lt; Zurück zum Koloniemenü
                            </a>
                        </td>
                        <td style="width: 50%;" tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/11}">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(11);">
                                <span i18n:translate="">Torpedoherstellung</span>
                            </a>
                        </td>
                    </tr>
                </table>
                <br />
                <table class="tcal">
                    <tr>
                        <th i18n:translate="">Herstellung</th>
                    </tr>
                    <tr tal:condition="not:THIS/getBuildableTorpedoTypes">
                        <td i18n:translate="">Es können keine Torpedos gebaut werden</td>
                    </tr>
                    <tr tal:condition="THIS/getBuildableTorpedoTypes">
                        <td class="darkbg">Typ</td>
                        <td class="darkbg">Kosten</td>
                    </tr>
                    <tr tal:repeat="data THIS/getBuildableTorpedoTypes" tal:attributes="class string:row${repeat/data/odd}">
                        <td>
                            <stu:textinput name="torps[${data/getId}]" width="3" /> x <span tal:replace="data/getAmount">AMOUNT</span>
                            <img src="${GFX}/goods/${data/getGoodId}.gif" class="center" />
                            <span tal:replace="data/getName">TORPEDOTYPE</span>
                        </td>
                        <td>
                            <img src="${GFX}/buttons/e_trans2.gif" class="center" title="Energiekosten" i18n:attributes="title" />
                            <span tal:replace="data/getECost">ECOST</span>
                            <tal:block tal:repeat="cost data/getCosts">
                                <img src="${GFX}/goods/${cost/getGoodId}.gif" class="center" tal:attributes="title cost/getGood/getName" />
                                <span tal:replace="cost/getAmount">COUNT</span>
                            </tal:block>
                        </td>
                    </tr>
                </table>
                <div tal:condition="THIS/getBuildableTorpedoTypes" style="width: 100%; text-align: center">
                    <br />
                    <stu:submit name="B_BUILD_TORPEDOS" value="Torpedos herstellen" i18n:attributes="value" />
                </div>
            </div>
        </metal:macro>
    </metal:macro>
    <metal:macro metal:define-macro="cm_airfield">
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <stu:hidden name="id" tal:attributes="value THIS/getColony/getId" />
                <table class="tcal">
                    <tr>
                        <td style="width: 50%;" class="colonymenu">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
                                &lt;&lt; Zurück zum Koloniemenü
                            </a>
                        </td>
                        <td style="width: 50%;" tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/6}">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(6);">
                                <span i18n:translate="">Hangar</span>
                            </a>
                        </td>
                    </tr>
                </table>
                <br />
                <table class="tcal">
                    <tr>
                        <th i18n:translate="">Schiff starten</th>
                    </tr>
                    <tr tal:repeat="data THIS/getStartableAirfieldRumps">
                        <td>
                            <input type="radio" name="startrump" value="" tal:attributes="value data/getId" />
                            <img src="${GFX}/ships/${data/getId}.gif" />
                        </td>
                        <td tal:content="data/getName" style="vertical-align: middle;">NAME</td>
                    </tr>
                    <tr tal:condition="not:THIS/getStartableAirfieldRumps">
                        <td colspan="2" i18n:translate="" style="text-align: center;">Keine startbaren Schiffe vorhanden</td>
                    </tr>
                </table>
                <div tal:condition="THIS/getStartableAirfieldRumps" style="width: 100%; text-align: center">
                    <br />
                    <stu:submit name="B_START_AIRFIELD_SHIP" value="Schiff starten" i18n:attributes="value" />
                </div>
                <br />
                <table class="tcal">
                    <tr>
                        <th i18n:translate="" colspan="3">Schiff bauen</th>
                    </tr>
                    <tr tal:repeat="data THIS/getAvailableAirfieldRumps" tal:attributes="class string:row${repeat/data/odd}">
                        <td>
                            <input type="radio" name="buildrump" value="" tal:attributes="value data/getId" />
                            <img src="${GFX}/ships/${data/getId}.gif" />
                        </td>
                        <td tal:content="data/getName" style="vertical-align: middle;">NAME</td>
                        <td>
                            <div style="display: inline-block; width: 50px;">
                                <div style="display: inline-block; vertical-align: middle;"><img src="${GFX}/buttons/e_trans2.gif" title="Energie" i18n:attributes="title" /></div>
                                ${data/getEpsCost}
                            </div>
                            <div style="display: inline-block; width: 50px;" tal:repeat="cost data/getBuildingCosts">
                                <div style="display: inline-block; vertical-align: middle;"><img src="${GFX}/goods/${cost/getGoodId}.gif" tal:attributes="title cost/getGood/getName" /></div>
                                ${cost/getAmount}
                            </div>
                        </td>
                    </tr>
                    <tr tal:condition="not:THIS/getAvailableAirfieldRumps">
                        <td colspan="3" i18n:translate="" style="text-align: center;">Keine baubaren Rümpfe vorhanden</td>
                    </tr>
                </table>
                <div tal:condition="THIS/getAvailableAirfieldRumps" style="width: 100%; text-align: center">
                    <br />
                    <stu:submit name="B_BUILD_AIRFIELD_RUMP" value="Schiff bauen" i18n:attributes="value" />
                </div>
            </div>
        </metal:macro>
	</metal:macro>
    <metal:block metal:define-macro="cm_building_mgmt">
        <metal:macro metal:use-macro="cm_tabs" />
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <input type="hidden" name="colmenu" value="cm_building_mgmt" />
                <input type="hidden" name="id" tal:attributes="value currentColony/getId" />
                <div style="float: left; width: 300px;">
                    <div class="divhead">Gebäudewahl</div>
                    <div class="divbody">
                        <select style="width: 100%; height: 370px;" multiple="multiple" name="selfields[]">
                            <tal:block tal:repeat="data THIS/getBuildingList">
                                <option style="padding-top: 2px; padding-left: 2px;" tal:condition="data/isActivateable" tal:attributes="value data/getFieldId" tal:content="string:${data/getBuilding/getName} (${data/getActiveShort})">NAME</option>
                            </tal:block>
                        </select>
                        <div style="margin-top: 10px; width: 50%; float: left;">
                            <input type="submit" value="Aktivieren" name="B_MULTIPLE_ACTIVATION" />
                        </div>
                        <div style="margin-top: 10px; text-align: right; width: 50%; float: left;">
                            <input type="submit" value="Deaktivieren" name="B_MULTIPLE_DEACTIVATION" />
                        </div>
                        <br style="clear: both;" />
                    </div>
                </div>
                <div style="margin-left: 5px; float: left; width: 295px;">
                    <div class="divhead">Gebäudegruppen</div>
                    <div class="divbody">
                        <img src="${GFX}/buttons/e_trans2.gif" title="Energie" style="width: 10px; height: 10px;" /> <strong>Energie</strong><br />
                        <span style="color: rgb(206, 206, 206);">&gt;</span> <a href="?id=${currentColony/getId}&B_ACTIVATE_EPSRELATED_USER=1&sstr=${THIS/getSessionString}">Verbraucher aktivieren</a><br />
                        <span style="color: rgb(206, 206, 206);">&gt;</span> <a href="?id=${currentColony/getId}&B_DEACTIVATE_EPSRELATED_USER=1&sstr=${THIS/getSessionString}">Verbraucher deaktivieren</a><br /><br />
                        <span style="color: rgb(206, 206, 206);">&gt;</span> <a href="?id=${currentColony/getId}&B_ACTIVATE_EPSRELATED_PROD=1&sstr=${THIS/getSessionString}">Produzenten aktivieren</a><br />
                        <span style="color: rgb(206, 206, 206);">&gt;</span> <a href="?id=${currentColony/getId}&B_DEACTIVATE_EPSRELATED_PROD=1&sstr=${THIS/getSessionString}">Produzenten deaktivieren</a><br /><br />
                        <img src="${GFX}/buttons/lager.gif" title="Warenbezogen" style="width: 10px; height: 10px;" /> <strong>Warenbezogen</strong><br />
                        Ware wählen: <select name="good" style="height: 17px;">
                        <option class="goodselect_option" tal:repeat="data THIS/getUseableGoodlist" tal:attributes="value data/getId" tal:content="data/getName" style=" background-image: url(${GFX}/goods/${data/getId}.gif);">NAME</option>
                    </select><br /><br />
                        <table class="tcal">
                            <tr>
                                <td style="text-align: center;" class="darkbg">Produzenten</td>
                                <td style="text-align: center;" class="darkbg">Verbraucher</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <input type="submit" value="aktivieren" name="B_ACTIVATE_GOODRELATED_PROD" /><br /><br />
                                    <input type="submit" value="deaktivieren" name="B_DEACTIVATE_GOODRELATED_PROD" />

                                </td>
                                <td style="text-align: center;">
                                    <input type="submit" value="aktivieren" name="B_ACTIVATE_GOODRELATED_USER" /><br /><br />
                                    <input type="submit" value="deaktivieren" name="B_DEACTIVATE_GOODRELATED_USER" />
                                </td>
                            </tr>
                        </table>
                        <br />
                        <img src="${GFX}/buttons/lager.gif" title="Bevölkerungsbezogen" style="width: 10px; height: 10px;" /> <strong>Bevölkerungsbezogen</strong><br />
                        <span style="color: rgb(206, 206, 206);">&gt;</span> <a href="?id=${currentColony/getId}&B_ACTIVATE_BEVRELATED=1&sstr=${THIS/getSessionString}">Wohngebäude aktivieren</a><br />
                        <span style="color: rgb(206, 206, 206);">&gt;</span> <a href="?id=${currentColony/getId}&B_DEACTIVATE_BEVRELATED=1&sstr=${THIS/getSessionString}">Wohngebäude deaktivieren</a><br /><br />
                        <span style="color: rgb(206, 206, 206);">&gt;</span> <a href="?id=${currentColony/getId}&B_ACTIVATE_WORKRELATED=1&sstr=${THIS/getSessionString}">Arbeitgeber aktivieren</a><br />
                        <span style="color: rgb(206, 206, 206);">&gt;</span> <a href="?id=${currentColony/getId}&B_DEACTIVATE_WORKRELATED=1&sstr=${THIS/getSessionString}">Arbeitgeber deaktivieren</a><br /><br />
                    </div>
                </div>
            </div>
        </metal:macro>
	</metal:block>
	<metal:block metal:define-macro="cm_management">
        <metal:macro metal:use-macro="cm_tabs" />
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <input type="hidden" name="id" value="runtime" tal:attributes="value currentColony/getId" />
                <stu:box title="Schiffe im Orbit" i18n:attributes="title">
                    <ul id="shipselector">
                        <metal:block tal:condition="currentColony/getFirstOrbitShip" metal:use-macro="shipselector" tal:define="data currentColony/getFirstOrbitShip" />
                        <li tal:condition="not:currentColony/getFirstOrbitShip" style="text-align: center" i18n:translate="">Keine Schiffe im Orbit</li>
                    </ul>
                    <div style="width: 100%;" tal:condition="currentColony/getFirstOrbitShip">
                        <br />
                        <a href="javascript:void(0);" onclick="showBFromWindow();" onmouseover="cp('beamfrom','buttons/b_down2')" onmouseout="cp('beamfrom','buttons/b_down1')"><img src="${GFX}/buttons/b_down1.gif" name="beamfrom" title="Von Schiff beamen" /></a>
                        <a href="javascript:void(0);" onclick="showBToWindow();" onmouseover="cp('beamto','buttons/b_up2')" onmouseout="cp('beamto','buttons/b_up1')"><img src="${GFX}/buttons/b_up1.gif" name="beamto" title="Zu Schiff beamen" /></a>
                        <a href="javascript:void(0);" onclick="getOrbitShipList();">Liste</a> | <a href="?SHOW_ORBITAL_SHIPS=1&id=${currentColony/getId}">Management</a>
                    </div>
                </stu:box>
                <br />
                <stu:box title="Standort" i18n:attributes="title" style="text-align: center">
                    <img src="${GFX}/planets/${currentColony/getColonyClass}.gif" style="width: 15px; height: 15px;" /> <span i18n:translate="">Planet <span i18n:name="planetname" tal:replace="currentColony/getPlanetName"/></span> (${currentColony/getPosX}|${currentColony/getPosY})
                    <span i18n:translate="">in Sternensystem</span>
                    <img src="${GFX}/map/${currentColony/getSystem/getType}.gif" style="width: 15px; height: 15px;" /> ${currentColony/getSystem/getName} (${currentColony/getSystem/getCX}|${currentColony/getSystem/getCY})
                </stu:box>
                <br />
                <table class="tcal population">
                    <tr>
                        <th colspan="5">Bevölkerung</th>
                    </tr>
                    <tr>
                        <td>
                            <span i18n:translate="">Gesamt</span><br />
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Bevölkerung" /> ${currentColony/getPopulation}
                        </td>
                        <td>
                            <span i18n:translate="">Arbeiter</span><br />
                            <img src="${GFX}/bev/bev_used_5_${THIS/getUser/getFaction}.gif" title="Arbeiter" /> ${currentColony/getWorkers}
                        </td>
                        <td>
                            <span i18n:translate="">Verfügbar</span><br />
                            <img src="${GFX}/bev/bev_unused_5_${THIS/getUser/getFaction}.gif" title="Freie Bevölkerung" /> ${currentColony/getWorkless}
                        </td>
                        <td>
                            <span i18n:translate="">Wohnraum</span><br />
                            <img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Wohnraum" /> ${currentColony/getFreeHousing} (${currentColony/getMaxBev})
                        </td>
                        <td>
                            <span i18n:translate="">Wachstum</span><br />
                            <img src="${GFX}/bev/bev_unused_5_${THIS/getUser/getFaction}.gif" title="Wachstum" /> ${currentColony/getBevGrowthSymbol}${currentColony/getImmigration}
                        </td>
                    </tr>
                </table>
                <tal:block tal:condition="THIS/hasEffects">
                    <br />
                    <div style="white-space: normal">
                        <stu:box title="Effekte" i18n:attributes="title">
                            <tal:block tal:repeat="data THIS/getEffects">
                                <div style="display: inline-block; width: 49%;">
                                    <div style="display: inline-block; width: 87%;">
                                        <img src="${GFX}/goods/${data/good/getId}.gif" /> <span tal:content="data/good/getName">EFFECT</span>
                                    </div>
                                    <span tal:content="data/production/getProductionDisplay" tal:attributes="class data/production/getCssClass">SUM</span>
                                </div>
                            </tal:block>
                        </stu:box>
                    </div>
                </tal:block>
            </div>
        </metal:macro>
	</metal:block>
	<metal:block metal:define-macro="orbitshiplist">
		<ul>
			<tal:block tal:repeat="fleets THIS/getColony/getOrbitShipList">
				<tal:block tal:repeat="data fleets/ships">
					<metal:block metal:use-macro="shipselector" />
				</tal:block>
			</tal:block>
		</ul>
	</metal:block>
	<metal:block metal:define-macro="shipselector"><li><table class="use" style="width: 595px;" onmouseover="shipSelectorHover(this)" onmouseout="shipSelectorHoverEnd(this)" onclick="shipSelectorChoose(this,${data/ownedByCurrentUser});">
				<tr>
					<td class="darkbg" colspan="4">
						<span tal:replace="structure data/getName">SHIPNAME</span> | <span tal:replace="structure bbcode:data/getUser/getName">USERNAME</span>
					</td>
				</tr>
				<tr>
					<td style="width: 120px; vertical-align: middle;">
						<metal:macro metal:use-macro="html/shipmacros.xhtml/shipimage" tal:define="ship data" />
					</td>
					<td style="width: 150px;">
						<table class="tcal">
							<tr>
								<th style="width: 20px; text-align: center;">
									<img src="${GFX}/buttons/modul_1.gif" />
								</th>
								<td style="vertical-align: middle; text-align: center;">
									<span tal:replace="structure php:renderHuellStatusBar(data.getHuell(),data.getMaxHuell())">EPS</span> 
								</td>
								<td style="text-align: center;">
									${data/getHuell}
								</td>
							</tr>
						</table>
					</td>
					<td colspan="2" tal:condition="data/getIsDestroyed"></td>
					<tal:block tal:condition="not:data/getIsDestroyed">
						<td style="width: 150px;">
							<table class="tcal">
								<tr>
									<th style="width: 20px; text-align: center;">
										<img src="${GFX}/buttons/modul_2.gif" />
									</th>
									<td style="text-align: center; vertical-align: middle;">
										<span tal:replace="structure php:renderShieldStatusBar(data.shieldIsActive(),data.getShield(),data.getMaxShield())">SCHILDE</span>
									</td>
									<td style="text-align: center;">
										${data/getShield}
									</td>
								</tr>
							</table>
						</td>
						<td style="width: 150px;">
							<table class="tcal">
								<tr>
									<th style="text-align: center; width: 20px;">
										<img src="${GFX}/buttons/modul_8.gif" />
									</th>
									<td style="vertical-align: middle; text-align: center;">
										<span tal:replace="structure php:renderEpsStatusBar(data.getEps(),data.getMaxEps())">EPS</span>
									</td>
									<td style="text-align: center;">
										${data/getEps}
									</td>
								</tr>
							</table>
						</td>
					</tal:block>
				</tr>
			</table>
			<input type="hidden" name="selshipid" id="selshipid" value="runtime" tal:attributes="value data/getId" />
		</li>
	</metal:block>
    <metal:block metal:define-macro="cm_tabs">
        <div tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/2} colmenubutton" onclick="switchColonyMenu(2);">
            <img src="${GFX}/buttons/lupe2.gif" /> <span i18n:translate="">Informationen</span>
        </div>
        <div tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/1} colmenubutton" onclick="switchColonyMenu(1);">
            <img src="${GFX}/buttons/menu_planets1.gif" /> <span i18n:translate="">Baumenü</span>
        </div>
        <div tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/4} colmenubutton" onclick="switchColonyMenu(4)">
            <img src="${GFX}/buttons/bar2.gif" /> <span i18n:translate="">Soziales</span>
        </div>
        <div tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/5} colmenubutton" onclick="switchColonyMenu(5)">
            <img src="${GFX}/buttons/gebact2.gif" /> <span i18n:translate="">Gebäudeschaltung</span>
        </div>
        <div tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/3} colmenubutton" onclick="switchColonyMenu(3)">
            <img src="${GFX}/buttons/menu_option1.gif" /> <span i18n:translate="">Einstellungen</span>
        </div>
		<br />
        <div style="display: inline-block">
            <div id="colonyeps">
                <metal:block metal:use-macro="html/colonymacros.xhtml/colonyeps" />
            </div>
            <br />
            <div id="colsurface">
                <metal:macro metal:use-macro="html/colonymacros.xhtml/colonysurface" />
            </div>
            <br />
            <div id="colonystorage">
                <metal:block metal:use-macro="html/colonymacros.xhtml/colonystorage" />
            </div>
        </div>
	</metal:block>
	<metal:block metal:define-macro="cm_shipyard_tabs">
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <table class="tcal">
                    <tr>
                        <td style="width: 33%;" class="colonymenu">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
                                &lt;&lt; Zurück zum Koloniemenü
                            </a>
                        </td>
                        <td style="width: 33%;" tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/8}">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(8,${FUNC/getId});">
                                <span i18n:translate="">Neuer Bauplan</span>
                            </a>
                        </td>
                        <td style="width: 33%;" tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/9}">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(9,${FUNC/getId});">
                                <span i18n:translate="">Gespeicherte Baupläne</span>
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
        </metal:macro>
	</metal:block>
	<metal:block metal:define-macro="cm_modulefab_tabs">
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <table class="tcal">
                    <tr>
                        <td style="width: 50%;" class="colonymenu">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
                                &lt;&lt; Zurück zum Koloniemenü
                            </a>
                        </td>
                        <td style="width: 50%;" tal:attributes="class string:colonymenu ${THIS/isColonyMenuSelected/7}">
                            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(7,${FUNC/getId});">
                                <span i18n:translate="">Modulherstellung</span>
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
        </metal:macro>
	</metal:block>
	<metal:block metal:define-macro="cm_misc">
		<metal:macro metal:use-macro="cm_tabs" />
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <input type="hidden" name="colmenu" value="cm_misc" />
                <input type="hidden" name="id" value="runtime" tal:attributes="value currentColony/getId" />
                <input type="hidden" name="sstr" value="runtime" tal:attributes="value THIS/getSessionString" />
                <table class="tcal">
                    <tr>
                        <th>Name</th>
                    </tr>
                    <tr>
                        <td>
                            <input type="test" value="runtime" tal:attributes="value currentColony/getName" name="colname" style="width: 250px;" />
                            <input type="submit" name="B_CHANGE_NAME" value="Ändern" />
                        </td>
                    </tr>
                </table>
                <br />
                <div class="divhead">Einwanderung</div>
                <div class="divbody">
                    <table cellpadding="0" cellspacing="0" style="width: 100%;">
                        <tr>
                            <td style="width: 50%;">
							<span tal:condition="currentColony/getImmigrationState">
								Status: <span style="color: #007300;">Erlaubt</span>
							</span>
							<span tal:condition="not:currentColony/getImmigrationState">
								Status: <span style="color: #FF0000;">Verboten</span>
							</span>
                            </td>
                            <td style="width: 50%; text-align: right;">
							<span tal:condition="currentColony/getImmigrationState">
								<input type="submit" value="Verbieten" name="B_PERMIT_IMMIGRATION" />
							</span>
							<span tal:condition="not:currentColony/getImmigrationState">
								<input type="submit" value="Erlauben" name="B_ALLOW_IMMIGRATION" />
							</span>
                            </td>
                        </tr>
                    </table>
                </div>
                <br />
                <div class="divhead">Bevölkerungslimit</div>
                <div class="divbody">
                    <input type="text" size="4" name="poplimit" value="runtime" tal:attributes="value currentColony/getPopulationLimit" />
                    <input type="submit" name="B_SET_POPULATIONLIMIT" value="Ändern" />
                </div>
                <br />
                <div class="divhead">Kolonie aufgeben</div>
                <div class="divbody">
                    <div class="fabutton_red">
                        <a href="colonylist.php?B_GIVEUP_COLONY=1&id=${currentColony/getId}&sstr=${THIS/getSessionString}" class="fabutton fabutton_red">Kolonie aufgeben</a>
                    </div>
                </div>
            </div>
        </metal:macro>
	</metal:block>
    <metal:block metal:define-macro="cm_modulefab">
        <metal:macro metal:use-macro="cm_modulefab_tabs" />
        <br />
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <stu:hidden name="id" tal:attributes="value currentColony/getId" />
                <stu:hidden name="sstr" tal:attributes="value THIS/getSessionString" />
                <stu:hidden name="func" tal:attributes="value FUNC/getFunction" />
                <table class="tcal">
                    <tr>
                        <th i18n:translate="">Verfügbare Module</th>
                        <th i18n:translate="">Anzahl</th>
                        <th i18n:translate="">In Bau</th>
                    </tr>
                    <tr tal:repeat="data FUNC/getModulesByUser" tal:attributes="class string:row${repeat/data/odd}">
                        <td tal:define="module data/getModule">
                            <div style="margin-bottom: 5px;">
                                <img src="${GFX}/goods/${module/getGoodId}.gif" /> <span tal:content="module/getName">NAME</span>
                            </div>
                            <div style="display: table-cell;">
                                <img src="${GFX}/buttons/e_trans2.gif" title="Energie" i18n:attributes="title" /> <span tal:replace="module/getEcost">ECOST</span>
                            </div>
                            <tal:block tal:repeat="cost module/getCost">
                                <div style="display: table-cell; padding-left: 4px;">
                                    <img src="${GFX}/goods/${cost/getGoodId}.gif" />
                                </div>
                                <div style="display: table-cell; vertical-align: middle;" tal:content="cost/getAmount">COST</div>
                            </tal:block>
                        </td>
                        <td style="vertical-align: middle; text-align: center;">
                            <input type="text" size="2" name="module[${data/getModule/getId}]" />
                        </td>
                        <td id="module_${data/getModuleId}_action" style="vertical-align: middle; text-align: center;">
                            <metal:macro metal:use-macro="queue_count" tal:define="MODULE data/getModule" />
                        </td>
                    </tr>
                </table>
                <br />
                <div style="width: 100%; text-align: center;">
                    <stu:submit name="B_CREATE_MODULES" value="Herstellen" i18n:attributes="value" />
                </div>
            </div>
        </metal:macro>
	</metal:block>
	<metal:macro metal:define-macro="queue_count" tal:define="queue_count MODULE/getQueueCount/${THIS/getColony/getId}">
		<div tal:condition="queue_count">
			<div style="display: table-cell; vertical-align:middle;">
				<input type="text" size="2" name="cancel_module[${MODULE/getId}]" id="module_${MODULE/getId}_count" tal:attributes="value queue_count" />
			</div>
			<div style="display: table-cell; vertical-align:middle; padding-left: 4px;">
				<stu:imagelink href="Javascript:cancelModuleQueueEntries(${MODULE/getId});" image="x" title="Anzahl löschen" i18n:attributes="title" />
			</div>
		</div>
		<div tal:condition="not:queue_count">-</div>
	</metal:macro>
	<metal:block metal:define-macro="cm_shipyard">
		<metal:macro metal:use-macro="cm_shipyard_tabs" />
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <br />
                <table class="tcal">
                    <tr>
                        <th>Verfügbare Schiffsrümpfe</th>
                    </tr>
                    <tr tal:condition="THIS/getBuildableRumpsByBuildingFunction">
                        <td>
                            <div tal:repeat="rump THIS/getBuildableRumpsByBuildingFunction" style="width: 196px; height:100px; float: left;">
                                <a class="std" href="?SHOW_MODULE_SCREEN=1&id=${currentColony/getId}&rump=${rump/getId}" style="height: 100px; width: 196px; text-align: center; text-decoration: none; display: block;">
                                    <img src="${GFX}/ships/${rump/getId}.gif" tal:attributes="title rump/getName" style="padding-top: 5px;" /><br />
                                    ${rump/getName}<br /><br />
                                    <span i18n:translate="">Typ</span>: <span tal:replace="rump/getCategory/getName">TYPE</span><br />
                                    <span i18n:translate="">Im Einsatz</span>: <span tal:replace="rump/getShipCount">COUNT</span><br />
                                    <span i18n:translate="">Baupläne</span>: <span tal:replace="rump/getBuildplanCount">BUILDPLANS</span>
                                </a>
                            </div>
                        </td>
                    </tr>
                    <tr tal:condition="not:THIS/getBuildableRumps">
                        <td>Keine Rümpfe zum Bau vorhanden</td>
                    </tr>
                </table>
                <input type="hidden" name="id" value="runtime" tal:attributes="value currentColony/getId" />
                <input type="hidden" name="sstr" value="runtime" tal:attributes="value THIS/getSessionString" />
            </div>
        </metal:macro>
	</metal:block>
	<metal:block metal:define-macro="cm_buildplans">
        <metal:macro metal:use-macro="cm_shipyard_tabs" />
        <metal:macro metal:use-macro="colonymenu_container">
            <div metal:fill-slot="containment">
                <br />
                <table class="tcal">
                    <tr>
                        <th></th>
                        <th i18n:translate="">Bauzeit</th>
                        <th></th>
                        <th style="width: 20px;"></th>
                    </tr>
                    <tal:block tal:repeat="data THIS/getBuildplans">
                        <tr tal:attributes="class string:row${repeat/data/odd}" i18n:attributes="title" style="cursor: pointer;" title="Details">
                            <td tal:content="data/getName" class="selectable" onclick="toggleTableRowVisible('buildplan_${data/getId}');">NAME</td>
                            <td tal:content="data/getBuildtimeFormatted" onclick="toggleTableRowVisible('buildplan_${data/getId}');">BUILDTIME</td>
                            <td style="text-align: center;">
                                <a class="linkbutton" i18n:translate="" href="?id=${currentColony/getId}&SHOW_MODULE_SCREEN_BUILDPLAN=1&planid=${data/getId}">Bauen</a>
                            </td>
                            <td style="text-align: center;">
                                <a tal:condition="data/isDeleteAble" class="linkbutton linkbutton_red" onclick="deleteBuildplan(${data/getId},${FUNC/getId});" i18n:attributes="title" href="javascript:void(0);" title="Löschen">X</a>
                            </td>
                        </tr>
                        <tr title="Details schließen" i18n:attributes="title" onclick="toggleTableRowVisible('buildplan_${data/getId}');" id="buildplan_${data/getId}" style="cursor: pointer; display: none;" tal:attributes="class string:row${repeat/data/odd}">
                            <td colspan="4">
                                <table style="width: 100%">
                                    <tr>
                                        <td i18n:translate="">Rumpf</td>
                                        <td>
                                            <div style="display: table-cell;">
                                                <img src="${GFX}/ships/${data/getRump/getId}.gif" />
                                            </div>
                                            <span style="display: table-cell; vertical-align: middle;" tal:content="data/getRump/getName">NAME</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td i18n:translate="">Module</td>
                                        <td>
                                            <img src="${GFX}/goods/${module/getModule/getGoodId}.gif" tal:attributes="name module/getModule/getName" tal:repeat="module data/getModules" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td i18n:translate="">Crewbedarf</td>
                                        <td tal:content="data/getCrew">CREW</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </tal:block>
                </table>
            </div>
        </metal:macro>
	</metal:block>
	<metal:block metal:define-macro="buildinginfo">
		<metal:macro use-macro="building_preview" tal:define="display string:block;preview_id string:building_preview_default; building buildingdata" />
		<tal:block tal:repeat="buildingalt buildingdata/getAlternateBuildings">
			<metal:macro use-macro="building_preview" tal:define="display string:none;building buildingalt/getAlternateBuilding; preview_id string:building_preview_${buildingalt/getFieldType}" />
		</tal:block>
		<metal:macro metal:define-macro="building_preview">
			<table class="use building_preview_table" style="width: 390px; display: ${display};" tal:attributes="id preview_id">
				<tr>
					<td class="center" style="vertical-align: top; width: 100px;">
                        <br />
						<img src="${GFX}/buildings/${building/getId}/0at.png" />
						<br /><br />
						<strong i18n:translate="">Baubar</strong><br />
						<tal:block tal:condition="not:building/isAlternateBuilding">
							<img src="#" tal:repeat="field building/getBuildableFields" tal:attributes="src string:${GFX}/fields/${field}.gif; title php:getFieldName(field)" style="width: 15px; height: 15px; margin-right: 4px; margin-bottom: 4px;" />
						</tal:block>
						<tal:block tal:condition="building/isAlternateBuilding">
							<img src="#" tal:repeat="field building/isAlternateBuilding/getBuilding/getBuildableFields" tal:attributes="src string:${GFX}/fields/${field}.gif; title php:getFieldName(field)" style="width: 15px; height: 15px; margin-right: 4px; margin-bottom: 4px;" />
						</tal:block>
					</td>
					<td style="vertical-align: top; width: 110px;">
						<strong>Baukosten</strong><br />
						<img src="${GFX}/buttons/e_trans2.gif" title="Energie" i18n:attributes="title" /> ${building/getEpsCost}
						<div tal:repeat="data building/getCosts">
							<img src="${GFX}/goods/${data/getGoodId}.gif" tal:attributes="title data/getGood/getName"/>
							<span tal:replace="data/getAmount">CNT</span>
						</div>
						<br />
						<strong i18n:translate="">Bauzeit</strong><br />
						<span tal:replace="php:formatSeconds(building.getBuildTime())">BUILDTIME</span>
					</td>
					<td style="vertical-align: top; width: 110px;">
						<div tal:condition="building/isActivateable">
							<strong>Produktion</strong>
							<div tal:condition="building/getEpsProduction">
								<img src="${GFX}/buttons/e_trans2.gif" title="Energie" /> <span tal:replace="building/getEpsProductionDisplay">EPSDISPLAY</span>
							</div>
							<div tal:repeat="data building/getGoods">
								<img src="${GFX}/goods/${data/getGoodId}.gif" tal:attributes="title data/getGood/getName" />
								<span tal:replace="data/getCountDisplay">CNT</span>
							</div>
							<br />
						</div>
						<br />
						<strong>Vorschau</strong>
						<div tal:condition="building/getEpsProduction">
							<img src="${GFX}/buttons/e_trans2.gif" title="Energie" />
							<span tal:content="THIS/getColony/getEpsProductionPreview/${building/getId}/getDisplay" tal:attributes="class THIS/getColony/getEpsProductionPreview/${building/getId}/getCSS">EPSDISPLAY</span>
							(<span tal:content="building/getEpsProductionDisplay" tal:attributes="class building/getEpsProductionCss">EPSDISPLAY</span>)
						</div>
						<div tal:repeat="data THIS/getColony/getProductionPreview/${building/getId}">
							<img src="${GFX}/goods/${data/getGoodId}.gif" tal:attributes="title data/getGood/getName" />
							<span tal:attributes="class data/getCssClass" tal:content="data/getProductionDisplay">CNT</span>
							<tal:block tal:condition="data/getPreviewProduction">
								(<span tal:content="data/getPreviewProductionDisplay" tal:attributes="class data/getPreviewProductionCss">CNT</span>)
							</tal:block>
						</div>
					</td>
					<td style="vertical-align: top; width: 110px;">
						<strong i18n:translate="">Auswirkungen</strong>
						<div tal:condition="building/getHousing">
							<img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Wohnraum" /> +<span tal:replace="building/getHousing">HOUSING</span>
						</div>
						<div tal:condition="building/getWorkers">
							<img src="${GFX}/bev/bev_used_5_${THIS/getUser/getFaction}.gif" title="Arbeiter" /> -<span tal:replace="building/getWorkers">WORKERS</span>
						</div>
						<div tal:condition="building/getStorage">
							<img src="${GFX}/buttons/lager.gif" title="Lagerraum" /> +<span tal:replace="building/getStorage">STORAGE</span>
						</div>
						<div tal:condition="building/getEpsStorage">
							<img src="${GFX}/buttons/eps.gif" title="Energiespeicher" /> +<span tal:replace="building/getEpsStorage">EPSSTORAGE</span>
						</div>
					</td>
				</tr>
				<tr tal:condition="building/getFunctionString">
					<td colspan="4">
						Ermöglicht: <span tal:replace="building/getFunctionString">FUNC</span>
					</td>
				</tr>
			</table>
		</metal:macro>
	</metal:block>
	<metal:macro metal:define-macro="colonysurface">
		<table class="use" style="border: 0; margin: 0; padding: 0 ! important;">
			<tr tal:repeat="slot currentColony/getColonyFields">
				<tal:block tal:repeat="field slot/fields">
					<tal:block tal:condition="not:field/hasBuilding">
						<td tal:condition="not:field/getTerraformingId" style="width: 40px; height: 40px;" tal:attributes="class field/getCssClass"><div style="width: 40px; height: 40px;" onclick="fieldMouseClick(this,${field/getFieldId},0);" id="field${field/getFieldId}"><div><div><img onmouseover="fieldMouseOver(this,${field/getFieldId},${field/getBuildingId},${field/getFieldType})" onmouseout="fieldMouseOut(this,${field/getFieldType})" style="width: 40px; height: 40px;" title="runtime" tal:attributes="title field/getTitleString" src="${GFX}/fields/${field/getFieldType}.gif" /></div></div></div>
						</td>
						<td tal:condition="field/getTerraformingId" style="width: 40px; height: 40px;" tal:attributes="class field/getCssClass"><div style="background-image: url(${GFX}/fields/${field/getFieldType}.gif); width: 40px; height: 40px;" onclick="fieldMouseClick(this,${field/getFieldId},0);" id="field${field/getFieldId}"><div><div><img class="action" style="width: 40px; height: 40px;" title="runtime" tal:attributes="title field/getTitleString" src="${GFX}/terraform/${field/getTerraformingId}/${currentColony/getDayNightState}.png" /></div></div></div>
						</td>
					</tal:block>
					<tal:block tal:condition="field/hasBuilding">
						<td tal:condition="not:field/isInConstruction" style="width: 40px; height: 40px;" tal:attributes="class field/getCssClass"><div style="background-image: url(${GFX}/fields/${field/getFieldType}.gif); width: 40px; height: 40px;" onclick="fieldMouseClick(this,${field/getFieldId},${field/getBuildingId});" id="field${field/getFieldId}"><div onmouseover="fieldMouseOver(this,${field/getFieldId},${field/getBuildingId},${field/getFieldType})" onmouseout="fieldMouseOut(this,${field/getFieldType})"><div><img style="width: 40px; height: 40px;" title="runtime" tal:attributes="title field/getTitleString" src="${GFX}/buildings/${field/getBuildingId}/${field/getBuilding/getBuildingType}${field/getBuildingState}${currentColony/getDayNightState}.png" /></div></div></div></td>
						<td tal:condition="field/isInConstruction" style="width: 40px; height: 40px;" tal:attributes="class field/getCssClass"><div style="background-image: url(${GFX}/fields/${field/getFieldType}.gif); width: 40px; height: 40px;" onclick="fieldMouseClick(this,${field/getFieldId},${field/getBuildingId});" id="field${field/getFieldId}"><div onmouseover="fieldMouseOver(this,${field/getFieldId},${field/getBuildingId},${field/getFieldType})" onmouseout="fieldMouseOut(this,${field/getFieldType})" style="width: 40px; height: 40px; background-image: url(${GFX}/buildings/${field/getPictureType}${currentColony/getDayNightState}.png)"><div style="height: 40px; overflow: hidden; width: ${field/getOverlayWidth}px;"><img style="width: 40px; height: 40px;" title="runtime" tal:attributes="title field/getTitleString" src="${GFX}/buildings/${field/getBuildingId}/${field/getBuilding/getBuildingType}a${currentColony/getDayNightState}.png" /></div></div></div></td>
					</tal:block>
				</tal:block>
			</tr>
		</table>
	</metal:macro>
	<metal:macro metal:define-macro="fieldaction">
		<table class="use" style="width: 500px;">
			<tr>
				<td>
					<div style="width: 100%;" tal:condition="THIS/getField/isInConstruction">
						<div style="background-image: url(${GFX}/fields/${THIS/getField/getFieldType}.gif); width: 40px; height: 40px; display: table-cell;">
							<div style="width: 40px; height: 40px; background-image: url(${GFX}/buildings/${THIS/getField/getPictureType}${currentColony/getDayNightState}.png)">
								<div style="height: 40px; overflow: hidden; width: ${THIS/getField/getOverlayWidth}px;">
									<img style="width: 40px; height: 40px;" title="runtime" tal:attributes="title THIS/getField/getTitleString" src="${GFX}/buildings/${THIS/getField/getBuildingId}/${THIS/getField/getBuilding/getBuildingType}a${currentColony/getDayNightState}.png" />
								</div>
							</div>
						</div>
						<div style="text-align: left; padding-left: 5px; display: table-cell; vertical-align: top;">
							<span style="font-weight: bold;">${THIS/getField/getBuilding/getName}</span><br />
							<span i18n:translate="">auf</span> ${THIS/getField/getFieldTypeName}
						</div>
						<div>
							<div style="display: table-cell; padding-top: 5px;" tal:content="structure php:getPercentageStatusBar(STATUSBAR_GREEN,THIS.getField().getBuildProgress(),THIS.getField().getBuilding().getBuildTime())">STATUSBAR</div>
							<div style="display: table-cell; vertical-align: middle; padding-left: 5px;">
								<span i18n:translate="">Baustatus</span>: <span tal:replace="php:getPercentage(THIS.getField().getBuildProgress(),THIS.getField().getBuilding().getBuildTime())">PERCENTAGE</span>%<br />
							</div>
						</div>
						<tal:block tal:condition="THIS/getField/isInConstruction">
							<span i18n:translate="">Fertigstellung</span>: <span tal:replace="THIS/getField/getBuildtimeDisplay">DATE</span>
						</tal:block>
					</div>
					<div tal:condition="not:THIS/getField/isInConstruction">
						<div tal:condition="not: THIS/getField/hasBuilding">
							<div style="display: table-cell;">
								<img src="${GFX}/fields/${THIS/getField/getFieldType}.gif" /><br />
							</div>
							<div style="text-align: left; padding-left: 5px; display: table-cell; vertical-align: top;">
								${THIS/getField/getFieldTypeName}
							</div>
						</div>
						<div tal:condition="THIS/getField/hasBuilding">
							<div style="background-image: url(${GFX}/fields/${THIS/getField/getFieldType}.gif); width: 40px; height: 40px; display: table-cell;">
								<img style="width: 40px; height: 40px;" title="runtime" tal:attributes="title THIS/getField/getTitleString" src="${GFX}/buildings/${THIS/getField/getBuildingId}/${THIS/getField/getBuilding/getBuildingType}${THIS/getField/getBuildingState}${currentColony/getDayNightState}.png" />
							</div>
							<div style="text-align: left; padding-left: 5px; display: table-cell; vertical-align: top;">
								<span style="font-weight: bold;">${THIS/getField/getBuilding/getName}</span><br />
								<span i18n:translate="">auf</span> ${THIS/getField/getFieldTypeName}<br />
								<span i18n:translate="">Integrität</span>: ${THIS/getField/getIntegrity}/${THIS/getField/getBuilding/getIntegrity}
							</div>
							<br /><br />
							<div class="fabutton" tal:condition="THIS/getField/getBuilding/isShipyard">
								<a href="javascript:void(0)" onclick="switchColonyMenu(8,${THIS/getField/getBuilding/isShipyard});cClick();" class="fabutton" i18n:translate="">Schiffbau</a>
							</div>
							<div class="fabutton" tal:condition="THIS/getField/getBuilding/isShipyard">
								<a href="colony.php?id=${THIS/getColony/getId}&SHOW_SHIP_REPAIR=1&fid=${THIS/getField/getFieldId}" class="fabutton" i18n:translate="">Schiffreparatur</a>
							</div>
							<div class="fabutton" tal:condition="THIS/getField/getBuilding/isAirfield">
								<a href="javascript:void(0)" onclick="switchColonyMenu(6);cClick();" class="fabutton" i18n:translate="">Hangar</a>
							</div>
							<div class="fabutton" tal:condition="THIS/getField/getBuilding/isModuleFab">
								<a href="javascript:void(0)" onclick="switchColonyMenu(7,${THIS/getField/getBuilding/isModuleFab});cClick();" class="fabutton" i18n:translate="">Modulherstellung</a>
							</div>
							<div class="fabutton" tal:condition="THIS/getField/getBuilding/isFighterShipyard">
								<a href="javascript:void(0)" onclick="switchColonyMenu(10);cClick();" class="fabutton" i18n:translate="">Schiffbau</a>
							</div>
							<div class="fabutton" tal:condition="THIS/getField/getBuilding/isFighterShipyard">
								<a href="colony.php?id=${THIS/getColony/getId}&SHOW_SHIP_REPAIR=1&fid=${THIS/getField/getFieldId}" class="fabutton" i18n:translate="">Schiffreparatur</a>
							</div>
							<div class="fabutton" tal:condition="THIS/getField/getBuilding/isTorpedoFab">
								<a href="javascript:void(0)" onclick="switchColonyMenu(11);cClick();" class="fabutton" i18n:translate="">Torpedoherstellung</a>
							</div>
							<div class="fabutton" tal:condition="THIS/getField/getBuilding/isAcademy">
								<a href="javascript:void(0)" onclick="switchColonyMenu(12);cClick();" class="fabutton" i18n:translate="">Akademie</a>
							</div>
							<br />
						</div>
						<tal:block tal:condition="THIS/getField/hasBuilding">
							<tal:block tal:condition="THIS/getField/isActivateAble">
								<div tal:condition="THIS/getField/hasHighDamage" i18n:translate="">
									Das Gebäude ist stark beschädigt und kann nicht aktiviert werden.
								</div>
							</tal:block>
						</tal:block>
					</div>
				</td>
				<td tal:condition="THIS/getField/hasBuilding" style="vertical-align: top; width: 100px;">
					<strong i18n:translate="">Auswirkungen</strong>
					<div tal:condition="THIS/getField/getBuilding/getHousing">
						<img src="${GFX}/bev/bev_free_5_${THIS/getUser/getFaction}.gif" title="Wohnraum" /> +<span tal:replace="THIS/getField/getBuilding/getHousing">HOUSING</span>
					</div>
					<div tal:condition="THIS/getField/getBuilding/getWorkers">
						<img src="${GFX}/bev/bev_used_5_${THIS/getUser/getFaction}.gif" title="Arbeiter" /> -<span tal:replace="THIS/getField/getBuilding/getWorkers">WORKERS</span>
					</div>
					<div tal:condition="THIS/getField/getBuilding/getStorage">
						<img src="${GFX}/buttons/lager.gif" title="Lagerraum" /> +<span tal:replace="THIS/getField/getBuilding/getStorage">STORAGE</span>
					</div>
					<div tal:condition="THIS/getField/getBuilding/getEpsStorage">
						<img src="${GFX}/buttons/eps.gif" title="Energiespeicher" /> +<span tal:replace="THIS/getField/getBuilding/getEpsStorage">EPSSTORAGE</span>
					</div>
					<div tal:condition="THIS/getField/getBuilding/isActivateable">
						<br />
						<strong>Produktion</strong>
						<div tal:condition="THIS/getField/getBuilding/getEpsProduction">
							<img src="${GFX}/buttons/e_trans2.gif" title="Energie" /> <span tal:replace="THIS/getField/getBuilding/getEpsProductionDisplay">EPSDISPLAY</span>
						</div>
						<div tal:repeat="data THIS/getField/getBuilding/getGoods">
							<img src="${GFX}/goods/${data/getGoodId}.gif" tal:attributes="title data/getGood/getName" />
							<span tal:replace="data/getCountDisplay">CNT</span>
						</div>
						<br />
					</div>
				</td>
				<td rowspan="2" tal:condition="THIS/getField/hasUpgradeOrTerraformingOption" style="width: 100px; vertical-align: top;">
					<div tal:condition="THIS/getField/getPossibleUpgrades">
						<div tal:repeat="data THIS/getField/getPossibleUpgrades">
							<table class="tcal">
								<tr>
									<th tal:content="data/getDescription" colspan="4">DESCRIPTION</th>
								</tr>
								<tr>
									<td style="width: 45px; height: 45px; text-align: center; vertical-align: middle">
										<img src="${GFX}/buildings/${THIS/getField/getBuilding/getId}/0at.png" />
									</td>
									<td style="text-align: center; vertical-align: middle">
										=&gt;	
									</td>
									<td style="width: 45px; height: 45px; text-align: center; vertical-align: middle">
										<img src="${GFX}/buildings/${data/getUpgradeTo}/0at.png" />
									</td>
									<td style="text-align: left;">
										<strong>Kosten</strong><br />
										<img src="${GFX}/buttons/e_trans2.gif" title="Energie" /> ${data/getBuilding/getEpsCost}
										<div tal:repeat="cost data/getCost">
											<img src="${GFX}/goods/${cost/getGoodId}.gif" tal:attributes="title cost/getGood/getName" /> ${cost/getAmount}
										</div>
									</td>
								</tr>
								<tr>
									<td colspan="4" style="text-align: center;">
										<a href="?B_UPGRADE_BUILDING=1&id=${currentColony/getId}&fid=${THIS/getField/getFieldId}&upid=${data/getId}&sstr=${THIS/getSessionString}" class="linkbutton">Upgrade durchführen</a>
									</td>
								</tr>
							</table>
							<br />
						</div>
					</div>
					<div tal:condition="not:THIS/getField/hasBuilding">
						<tal:block tal:condition="THIS/getField/hasTerraforming">
							<table class="use" style="width: 250px;">
								<tr>
									<th colspan="3" style="text-align: center;">
										<span tal:content="THIS/getField/getTerraforming/getTerraforming/getDescription">DESCRIPTION</span> läuft
									</th>
								</tr>
								<tr>
									<td style="width: 45px; text-align: center;">
										<img src="${GFX}/fields/${THIS/getField/getTerraforming/getTerraforming/getSource}.gif" />
									</td>
									<td style="vertical-align: middle; width: 50px; text-align: center;">
										<div>
											Status: <span tal:replace="php:getPercentage(THIS.getField().getTerraforming().getProgress(),THIS.getField().getTerraforming().getTerraforming().getDuration())">PERCENTAGE</span>%</div>
										<div style="padding-top: 5px;" tal:content="structure php:getPercentageStatusBar(STATUSBAR_GREEN,THIS.getField().getTerraforming().getProgress(),THIS.getField().getTerraforming().getTerraforming().getDuration())">STATUSBAR</div>
									</td>
									<td style="width: 45px; text-align: center;">
										<img src="${GFX}/fields/${THIS/getField/getTerraforming/getTerraforming/getDestination}.gif" />
									</td>
								</tr>
								<tr>
									<td colspan="3" style="text-align: center;">
										Fertigstellung: <span tal:replace="THIS/getField/getTerraforming/getFinishDateDisplay">FINISH</span>	
									</td>
								</tr>
							</table>
						</tal:block>
						<tal:block tal:condition="not:THIS/getField/hasTerraforming">
							<div tal:condition="THIS/getField/getTerraformingOptions">
								<table class="use" style="width: 250px;" tal:repeat="data THIS/getField/getTerraformingOptions">
									<tr>
										<th colspan="4" tal:content="data/getDescription">DESCRIPTION</th>
									</tr>
									<tr>
										<td style="width: 45px;">
											<img src="${GFX}/fields/${data/getSource}.gif" />
										</td>
										<td style="vertical-align: middle; width: 50px; text-align: center;">
											=&gt;
										</td>
										<td style="width: 45px;">
											<img src="${GFX}/fields/${data/getDestination}.gif" />
										</td>
										<td style="vertical-align: top;" rowspan="2">
											<strong>Kosten</strong>
											<br />
											<img src="${GFX}/buttons/e_trans2.gif" title="Energie" /> <span tal:replace="data/getEpsCost">EPS</span>
											<div tal:repeat="cost data/getCosts">
												<img src="${GFX}/goods/${cost/getGoodsId}.gif" title="runtime" tal:attributes="title cost/getGoodName" /> <span tal:replace="cost/getAmount">COUNT</span>
											</div>
										</td>
									</tr>
									<tr>
										<td colspan="3" style="text-align: center">
											<a href="?B_TERRAFORM=1&id=${currentColony/getId}&fid=${THIS/getField/getFieldId}&tfid=${data/getId}&sstr=${THIS/getSessionString}" class="linkbutton">Durchführen</a>
										</td>
									</tr>
								</table>
								<br />
							</div>
						</tal:block>
					</div>
				</td>
			</tr>
			<tr tal:condition="THIS/getField/hasBuilding">
				<td colspan="2" style="text-align: center;">
					<table cellpadding="0" cellspacing="0">
						<tr>
							<td style="width: 100px;" tal:condition="THIS/getField/isActivateAble">
								<tal:block tal:condition="not:THIS/getField/hasHighDamage">
									<div class="fabutton" tal:condition="THIS/getField/isActive">
										<a href="?id=${currentColony/getId}&B_DEACTIVATE=1&fid=${THIS/getField/getFieldId}&sstr=${THIS/getSessionString}" class="fabutton">Deaktivieren</a>
									</div>
									<div class="fabutton" tal:condition="not:THIS/getField/isActive">
										<a href="?id=${currentColony/getId}&B_ACTIVATE=1&fid=${THIS/getField/getFieldId}&sstr=${THIS/getSessionString}" class="fabutton">Aktivieren</a>
									</div>
									<br />
								</tal:block>
							</td>
							<td style="width: 100px;">
								<div class="fabutton" tal:condition="THIS/getField/isDamaged">
									<a href="?id=${currentColony/getId}&B_REPAIR=1&fid=${THIS/getField/getFieldId}&sstr=${THIS/getSessionString}" class="fabutton">Reparieren</a>
								</div>
							</td>
							<td style="width: 100px;">
								<div class="fabutton_red" tal:condition="THIS/getField/getBuilding/isRemoveAble">
									<a href="javascript:void(0);" onclick="toggleVisible('confirm_remove')" class="fabutton fabutton_red" i18n:translate="">Demontieren</a>
								</div>
							</td>
							<td style="width: 100px;">
								<div id="confirm_remove" style="display:none;" class="fabutton_red" tal:condition="THIS/getField/getBuilding/isRemoveAble">
									<a href="?id=${currentColony/getId}&B_REMOVE_BUILDING=1&fid=${THIS/getField/getFieldId}&sstr=${THIS/getSessionString}" class="fabutton fabutton_red" i18n:translate="">bestätigen</a>
								</div>
							</td>
						</tr>
					</table>
					<tal:block tal:condition="THIS/getField/getBuilding/isShipyard">
						<metal:macro metal:use-macro="ship_buildprogress" tal:condition="THIS/getShipBuildProgress" tal:define="SHIP_BUILD_PROGRESS THIS/getShipBuildProgress" />
						<metal:macro metal:use-macro="ship_repairprogress" tal:condition="THIS/getShipRepairProgress"/>
					</tal:block>
				</td>
			</tr>
		</table>
	</metal:macro>
	<metal:macro metal:define-macro="ship_buildprogress">
		<table class="tcal">
			<tr>
				<th i18n:translate="" colspan="3">Schiffe in Bau</th>
			</tr>
			<tr tal:repeat="data SHIP_BUILD_PROGRESS" style="height: 50px" tal:attributes="class string:row${repeat/data/odd}">
				<td style="text-align: center; vertical-align: middle;">
					<img src="${GFX}/ships/${data/getRumpId}.gif" />
				</td>
				<td style="text-align: center; vertical-align: middle" tal:content="data/getRump/getName">RUMP</td>
				<tal:block tal:condition="not:data/isStopped">
					<td style="text-align: center; vertical-align: middle">
						<span tal:replace="structure php:getPercentageStatusBar(STATUSBAR_GREEN,data.getBuildtime()-(data.getFinishDate()-time()),data.getBuildtime())">STATUSBAR</span>
					</td>
					<td style="text-align: center; vertical-align: middle">
						<span tal:replace="data/getFinishDateFormatted">DATE</span>
					</td>
				</tal:block>
				<td colspan="2" style="text-align: center; vertical-align: middle" tal:condition="data/isStopped" i18n:translate="">Angehalten</td>
			</tr>
		</table>
	</metal:macro>
	<metal:macro metal:define-macro="ship_repairprogress">
		<table class="tcal">
			<tr>
				<th i18n:translate="" colspan="3">Schiffe in Reparatur</th>
			</tr>
			<tr tal:repeat="data THIS/getShipRepairProgress" style="height: 50px" tal:attributes="class string:row${repeat/data/odd}">
				<td style="text-align: center; vertical-align: middle;">
					<img src="${GFX}/ships/${data/getShip/getRumpId}.gif" />
				</td>
				<td style="text-align: center; vertical-align: middle" tal:content="data/getShip/getRump/getName">RUMP</td>
				<td style="text-align: center; vertical-align: middle">
					<img src="${GFX}/buttons/modul_1.gif" title="Hülle" i18n:attributes="title" style="width: 12px; height: 12px;" /> <span tal:content="structure php:renderHuellStatusBar(data.getShip().getHuell(),data.getShip().getMaxHuell())">BAR</span> ${data/getShip/getHuell}/${data/getShip/getMaxHuell}
				</td>
			</tr>
		</table>
	</metal:macro>
	<metal:block metal:define-macro="show_ship_beamto">
		<form action="colony.php" method="post">
			<input type="hidden" name="id" tal:attributes="value currentColony/getId" />
			<input type="hidden" name="target" tal:attributes="value targetShip/getId" />
			<input type="hidden" name="sstr" tal:attributes="value THIS/getSessionString" />
			<table class="tcal">
				<tr>
					<td colspan="2">Ziel: <span tal:replace="structure targetShip/getName">...</span></td>
				</tr>
				<tr>
					<td style="width: 100%;">
						<tal:block tal:condition="currentColony/getStorage" tal:repeat="good currentColony/getStorage">
							<input type="hidden" name="goods[]" tal:attributes="value good/getGoodId" />
							<div tal:condition="repeat/good/odd" style="float: right; width: 50%;">
								<metal:block metal:use-macro="html/macros.xhtml/goodentry" />
							</div>
							<div tal:condition="repeat/good/even" style="float: left; width: 50%;">
								<metal:block metal:use-macro="html/macros.xhtml/goodentry" />
							</div>
							<br tal:condition="repeat/good/odd" style="clear: both;" />
						</tal:block>
						<tal:block tal:condition="not:currentColony/getStorage">
							Keine Waren vorhanden
						</tal:block>
					</td>
					<td rowspan="2" style="height: 100%;">
						<table style="width: 100%; height: 100%;">
							<tr>
								<td style="text-align: center;">
									<a href="?id=${currentColony/getId}">
										<img src="${GFX}/planets/${currentColony/getColonyClass}.gif" />
									</a>
								</td>
							</tr>
							<tr>
								<td style="text-align: center; height: 10%;">
									<a href="javascript:void(0);" onclick="triggerBeamFrom()" onmouseover="cp('beamtrigger','buttons/b_up2');" onmouseout="cp('beamtrigger','buttons/b_up1');">
										<img src="${GFX}/buttons/b_up1.gif" name="beamtrigger" title="Beammodus wechseln" />
									</a>
								</td>
							</tr>
							<tr>
								<td style="text-align: center;">
									<metal:macro metal:use-macro="html/shipmacros.xhtml/shipimage" tal:define="ship targetShip" />
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td style="text-align: center;">
						<input type="submit" value="Beamen" name="B_BEAMTO" />
					</td>
				</tr>
			</table>
		</form>
	</metal:block>
	<metal:block metal:define-macro="show_ship_beamfrom">
		<form action="colony.php" method="post">
			<input type="hidden" name="id" tal:attributes="value currentColony/getId" />
			<input type="hidden" name="target" tal:attributes="value targetShip/getId" />
			<input type="hidden" name="sstr" tal:attributes="value THIS/getSessionString" />
			<table class="tcal">
				<tr>
					<td colspan="2">Ziel: <span tal:replace="structure targetShip/getName">...</span></td>
				</tr>
				<tr>
					<td style="width: 100%;">
						<tal:block tal:condition="targetShip/getStorage" tal:repeat="good targetShip/getStorage">
							<input type="hidden" name="goods[]" tal:attributes="value good/getGoodId" />
							<div tal:condition="repeat/good/odd" style="float: right; width: 50%;">
								<metal:block metal:use-macro="html/macros.xhtml/goodentry" />
							</div>
							<div tal:condition="repeat/good/even" style="float: left; width: 50%;">
								<metal:block metal:use-macro="html/macros.xhtml/goodentry" />
							</div>
							<br tal:condition="repeat/good/odd" style="clear: both;" />
						</tal:block>
						<tal:block tal:condition="not:targetShip/getStorage">
							Keine Waren vorhanden
						</tal:block>
					</td>
					<td rowspan="2" style="height: 100%;">
						<table style="width: 100%; height: 100%;">
							<tr>
								<td style="text-align: center;">
									<a href="?id=${currentColony/getId}">
										<img src="${GFX}/planets/${currentColony/getColonyClass}.gif" />
									</a>
								</td>
							</tr>
							<tr>
								<td style="text-align: center; height: 10%;">
									<a href="javascript:void(0);" onclick="triggerBeamTo()" onmouseover="cp('beamtrigger','buttons/b_down2');" onmouseout="cp('beamtrigger','buttons/b_down1');">
										<img src="${GFX}/buttons/b_down1.gif" name="beamtrigger" title="Beammodus wechseln" />
									</a>
								</td>
							</tr>
							<tr>
								<td style="text-align: center;">
									<metal:macro metal:use-macro="html/shipmacros.xhtml/shipimage" tal:define="ship targetShip" />
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td style="text-align: center;">
						<input type="submit" value="Beamen" name="B_BEAMFROM" />
					</td>
				</tr>
			</table>
		</form>
	</metal:block>
	<metal:block metal:define-macro="colonyeps">
		<input type="hidden" name="sstr" id="sstr" value="runtime" tal:attributes="value THIS/getSessionString" />
		<stu:box tal:attributes="title currentColony/getEpsBoxTitleString">
			<img src="${GFX}/buttons/e_trans2.gif" title="Energie" style="width: 12px; height: 12px;" /> <span tal:repeat="bar THIS/getEpsBar" tal:content="structure php:getStatusBar(bar.getVar(),bar.getValue())">BAR</span> ${currentColony/getEpsProductionDisplay}
		</stu:box>
	</metal:block>
	<metal:block metal:define-macro="colonystorage">
		<table class="use" style="width: 433px;">
			<tr>
				<th>
					<span i18n:translate="">Lager:</span> ${currentColony/getStorageSum}/${currentColony/getMaxStorage}
					(<span tal:replace="currentColony/getStorageSumPercent">PERCENT</span>%)
				</th>
				<td>
					<span tal:content="currentColony/getProductionSumDisplay" tal:attributes="class currentColony/getProductionSumClass">SUM</span>
				</td>
			</tr>
			<tr tal:attributes="class string:row${repeat/stor/odd}" tal:repeat="stor THIS/getColonyStorageDisplay">
				<td style="vertical-align: middle;">
					<div style="display: table-cell; width: 45px;">
						<img src="${GFX}/goods/${stor/good/getId}.gif" tal:attributes="title stor/good/getName" />
					</div>
					<div style="display: table-cell; width: 40px; vertical-align:middle;">
						<span tal:condition="stor/storage" tal:replace="stor/storage/getAmount">.</span>
						<span tal:condition="not:stor/storage" tal:replace="string:0">.</span>
					</div>
					<div style="display: table-cell; vertical-align: middle" tal:content="stor/good/getName">NAME</div>
				</td>
				<td style="vertical-align: middle;">
					<span tal:condition="not:stor/production">-</span>
					<span tal:condition="stor/production" tal:content="stor/production/getProductionDisplay" tal:attributes="class stor/production/getCssClass">.</span>
				</td>
			</tr>
		</table>
	</metal:block>
	<metal:macro metal:define-macro="module_select_tab">
		<td id="module_tab_${moduleType}" tal:define="tab THIS/getModuleScreenTabs/${moduleType}" tal:attributes="class tab/getCssClass" onclick="showModuleSelectTab(this,${moduleType});">
			<img src="${GFX}/buttons/modul_${moduleType}.gif" tal:condition="not:tab/hasSelectedModule" id="tab_image_mod_${moduleType}" />
			<tal:block tal:condition="tab/hasSelectedModule" tal:repeat="mod tab/getSelectedModule	">
				<img src="${GFX}/goods/${mod/getModule/getGoodId}.gif" id="tab_image_mod_${moduleType}" />
			</tal:block>
			<span tal:replace="tab/getTabTitle">DESCRIPTION</span>
		</td>
	</metal:macro>
    <metal:macro metal:define-macro="colonymenu_container">
        <div class="colonymenu_container">
            <form action="colony.php" method="post">
                <metal:macro metal:define-slot="containment" />
            </form>
        </div>
    </metal:macro>
</html>
